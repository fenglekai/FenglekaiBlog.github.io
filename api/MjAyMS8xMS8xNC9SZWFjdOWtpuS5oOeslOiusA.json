{"title":"Reactå­¦ä¹ ç¬”è®°","date":"2021-11-14T05:42:44.000Z","date_formatted":{"ll":"2021å¹´11æœˆ14æ—¥","L":"2021/11/14","MM-DD":"11-14"},"thumbnail":"https://picsum.photos/1280/720?random=1","color":"#111","link":"2021/11/14/Reactå­¦ä¹ ç¬”è®°","tags":["ğŸ“”ç¬”è®°","ğŸ”¥å‰ç«¯","ğŸš€æ¡†æ¶"],"updated":"2023-02-13T07:34:07.829Z","content":"<p><strong>ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“</strong></p>\n<p>stateæ˜¯å½“å‰ç»„ä»¶çš„çŠ¶æ€</p>\n<p>propsæ˜¯è·å–çˆ¶ç»„ä»¶çš„stateå€¼</p>\n<p>classç±»é‡Œï¼ŒthisæŒ‡å‘å½“å‰ç±»å†…çš„å†…å®¹ã€‚ä¾‹å¦‚this.stateæŒ‡å‘å½“å‰ç±»çš„stateçŠ¶æ€ï¼›this.functionæŒ‡å‘å½“å‰ç±»çš„æ–¹æ³•ã€‚</p>\n<p><strong>AntDesignPro</strong></p>\n<p>ä½¿ç”¨Ant Design proè„šæ‰‹æ¶å®˜ç½‘æ¥æ­å»ºé¡¹ç›®ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼Œservicesã€modelsã€mockã€pages</p>\n<ul>\n<li>\n<p>sevicesï¼šæ•°æ®æ¥å£</p>\n</li>\n<li>\n<p>modelsï¼šæ•°æ®å¤„ç†</p>\n</li>\n<li>\n<p>mockï¼šæ¨¡æ‹Ÿæ•°æ®</p>\n</li>\n<li>\n<p>pagesï¼šé¡µé¢</p>\n</li>\n</ul>\n<p>pagesè§¦å‘modelsä¸­çš„æ–¹æ³•æ¥å¤„ç†æ•°æ®ï¼Œè‹¥ä¸ºå¼‚æ­¥æ“ä½œåœ¨modelsä¸­éœ€è¦è°ƒç”¨servicesä¸­çš„æ•°æ®æ¥å£æ–¹æ³•ï¼Œåœ¨åå°æœªå†™å®Œæ—¶å¯ä»¥é€šè¿‡mockä¸­çš„æ¨¡æ‹Ÿæ•°æ®æ¥è°ƒè¯•</p>\n<p>å…·ä½“æ¥è¯´ï¼Œä¹Ÿå³æ˜¯ä½¿ç”¨dvaæ—¶ï¼Œ**æ•°æ®æµå‘æˆ–è€…è¯´è§¦å‘æµç¨‹ä¸ºï¼š**åœ¨pagesä¸­çš„jsxæ–‡ä»¶ä¸­é€šè¿‡dispatchè§¦å‘modelsä¸­çš„jsæ–‡ä»¶ä¸­çš„effectsæˆ–è€…reducersä¸­çš„æ–¹æ³•ï¼Œå…¶ä¸­effectsä¸­çš„æ–¹æ³•æ˜¯å¼‚æ­¥æ“ä½œï¼Œé€šè¿‡yield call(è°ƒç”¨æ¥å£å‡½æ•°æ–¹æ³•å)è°ƒç”¨ä»servicesä¸­jsæ–‡ä»¶å¼•å…¥çš„å®šä¹‰å¥½çš„è°ƒç”¨æ¥å£æ–¹æ³•ï¼Œç„¶åé€šè¿‡yield put({type: â€˜reduceresä¸­çš„æ–¹æ³•â€™})ï¼›æ¥è§¦å‘ reducersä¸­çš„æ–¹æ³•æ¥ä¿®æ”¹stateã€‚</p>\n<p><strong>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</strong></p>\n<p>componentWillMount åœ¨æ¸²æŸ“å‰è°ƒç”¨,åœ¨å®¢æˆ·ç«¯ä¹Ÿåœ¨æœåŠ¡ç«¯ã€‚</p>\n<p>componentDidMount : åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨ï¼Œåªåœ¨å®¢æˆ·ç«¯ã€‚ä¹‹åç»„ä»¶å·²ç»ç”Ÿæˆäº†å¯¹åº”çš„DOMç»“æ„ï¼Œå¯ä»¥é€šè¿‡this.getDOMNode()æ¥è¿›è¡Œè®¿é—®ã€‚ å¦‚æœä½ æƒ³å’Œå…¶ä»–JavaScriptæ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨setTimeout, setIntervalæˆ–è€…å‘é€AJAXè¯·æ±‚ç­‰æ“ä½œ(é˜²æ­¢å¼‚æ­¥æ“ä½œé˜»å¡UI)ã€‚</p>\n<p>componentWillReceiveProps åœ¨ç»„ä»¶æ¥æ”¶åˆ°ä¸€ä¸ªæ–°çš„ prop (æ›´æ–°å)æ—¶è¢«è°ƒç”¨ã€‚è¿™ä¸ªæ–¹æ³•åœ¨åˆå§‹åŒ–renderæ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚</p>\n<p>getDerivedStateFromProps componentWillReceivePropsçš„æ›¿æ¢æ–¹æ¡ˆã€‚Reactç›¸å½“äºæŠŠcomponentWillReceivePropsæ‹†åˆ†æˆgetDerivedStateFromPropså’ŒcomponentDidUpdateã€‚</p>\n<p>shouldComponentUpdate è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæˆ–è€…stateæ—¶è¢«è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶æˆ–è€…ä½¿ç”¨forceUpdateæ—¶ä¸è¢«è°ƒç”¨ã€‚</p>\n<p>å¯ä»¥åœ¨ä½ ç¡®è®¤ä¸éœ€è¦æ›´æ–°ç»„ä»¶æ—¶ä½¿ç”¨ã€‚</p>\n<p>componentWillUpdateåœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæˆ–è€…stateä½†è¿˜æ²¡æœ‰renderæ—¶è¢«è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚</p>\n<p>componentDidUpdate åœ¨ç»„ä»¶å®Œæˆæ›´æ–°åç«‹å³è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚</p>\n<p>componentWillUnmountåœ¨ç»„ä»¶ä» DOM ä¸­ç§»é™¤ä¹‹å‰ç«‹åˆ»è¢«è°ƒç”¨ã€‚</p>\n<p><strong>Hook</strong></p>\n<p>åœ¨è¿™é‡Œï¼ŒuseState å°±æ˜¯ä¸€ä¸ª Hook ï¼ˆç­‰ä¸‹æˆ‘ä»¬ä¼šè®²åˆ°è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼‰ã€‚é€šè¿‡åœ¨å‡½æ•°ç»„ä»¶é‡Œè°ƒç”¨å®ƒæ¥ç»™ç»„ä»¶æ·»åŠ ä¸€äº›å†…éƒ¨ stateã€‚React ä¼šåœ¨é‡å¤æ¸²æŸ“æ—¶ä¿ç•™è¿™ä¸ª stateã€‚useState ä¼šè¿”å›ä¸€å¯¹å€¼ï¼šå½“å‰çŠ¶æ€å’Œä¸€ä¸ªè®©ä½ æ›´æ–°å®ƒçš„å‡½æ•°ï¼Œä½ å¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æˆ–å…¶ä»–ä¸€äº›åœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚å®ƒç±»ä¼¼ class ç»„ä»¶çš„ this.setStateï¼Œä½†æ˜¯å®ƒä¸ä¼šæŠŠæ–°çš„ state å’Œæ—§çš„ state è¿›è¡Œåˆå¹¶ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">DetailQuery</span>(<span class=\"params\">props</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; clickDetailQueryBtn, clickDetailResetBtn &#125; = props;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [statu, setStatu] = <span class=\"title function_\">useState</span>(&#123; <span class=\"attr\">getstatu</span>: <span class=\"string\">&#x27;å…¨éƒ¨&#x27;</span> &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title function_\">updateState</span> = partialState =&gt;</span><br><span class=\"line\">        <span class=\"title function_\">setStatu</span>(<span class=\"function\"><span class=\"params\">oldState</span> =&gt;</span> (&#123;</span><br><span class=\"line\">            ...oldState,</span><br><span class=\"line\">            ...partialState</span><br><span class=\"line\">        &#125;));</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Layout</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">            <span class=\"tag\">&lt;<span class=\"name\">Row</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;background:</span> &#x27;<span class=\"attr\">white</span>&#x27;, <span class=\"attr\">paddingTop:</span> <span class=\"attr\">20</span>, <span class=\"attr\">paddingRight:</span> <span class=\"attr\">20</span>, <span class=\"attr\">paddingBottom:</span> <span class=\"attr\">20</span>&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">            &gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\">                <span class=\"tag\">&lt;<span class=\"name\">Col</span> <span class=\"attr\">span</span>=<span class=\"string\">&#123;6&#125;</span> <span class=\"attr\">className</span>=<span class=\"string\">&#123;styles.formItemClass&#125;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                    çŠ¶æ€ï¼š</span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;<span class=\"name\">Select</span> </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                    // <span class=\"attr\">defaultValue</span>=<span class=\"string\">&quot;å…¨éƒ¨&quot;</span> </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                    <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">width:</span> <span class=\"attr\">120</span> &#125;&#125; </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                    <span class=\"attr\">value</span>=<span class=\"string\">&#123;statu.getstatu&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                    <span class=\"attr\">onChange</span>=<span class=\"string\">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        updateState(&#123; getstatu: e &#125;);&#125; &#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">                    &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;å…¨éƒ¨&quot;</span>&gt;</span>å…¨éƒ¨<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;å¾…ä¸ŠæŠ¥&quot;</span>&gt;</span>å¾…ä¸ŠæŠ¥<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;å¾…å®¡æ ¸&quot;</span>&gt;</span>å¾…å®¡æ ¸<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;å·²é€šè¿‡&quot;</span>&gt;</span>å·²é€šè¿‡<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;æœªé€šè¿‡&quot;</span>&gt;</span>æœªé€šè¿‡<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;/<span class=\"name\">Select</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                <span class=\"tag\">&lt;/<span class=\"name\">Col</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                <span class=\"tag\">&lt;<span class=\"name\">Col</span> <span class=\"attr\">push</span>=<span class=\"string\">&#123;1&#125;</span> <span class=\"attr\">span</span>=<span class=\"string\">&#123;6&#125;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;<span class=\"name\">Button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                        <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                        <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;marginRight:</span> <span class=\"attr\">7</span>&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                        <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">                            clickDetailQueryBtn(statu);</span></span><br><span class=\"line\"><span class=\"language-xml\">                        &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">                    &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        æŸ¥è¯¢</span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;<span class=\"name\">Button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                        <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">                            clickDetailResetBtn(&#x27;&#x27;);</span></span><br><span class=\"line\"><span class=\"language-xml\">                        &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        // onClick=&#123;this.props.clickDetailResetBtn&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">                    &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        é‡ç½®</span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                <span class=\"tag\">&lt;/<span class=\"name\">Col</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">            <span class=\"tag\">&lt;/<span class=\"name\">Row</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;/<span class=\"name\">Layout</span>&gt;</span></span></span><br><span class=\"line\">    );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>Router</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®¡æ ¸å’Œé‡æ–°å®¡æ ¸</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">toExamineReport</span>(<span class=\"params\">params</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">request</span>(<span class=\"title class_\">Api</span>.<span class=\"property\">toExamineReport</span>, &#123; </span><br><span class=\"line\">        <span class=\"attr\">method</span>: <span class=\"string\">&#x27;POST&#x27;</span> ,</span><br><span class=\"line\">        <span class=\"attr\">body</span>: &#123;</span><br><span class=\"line\">            ...params</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// æŸ¥çœ‹ä¸ŠæŠ¥è®°å½•</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">getMyCorrectionReportQueryRecord</span>(<span class=\"params\">params</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">request</span>(<span class=\"title class_\">Api</span>.<span class=\"property\">getMyCorrectionReportQueryRecord</span> + <span class=\"string\">`?<span class=\"subst\">$&#123;stringify(params)&#125;</span>`</span>, &#123; </span><br><span class=\"line\">        <span class=\"attr\">method</span>: <span class=\"string\">&#x27;GET&#x27;</span> ,</span><br><span class=\"line\">        <span class=\"comment\">// body: &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">//     ...params</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// æ‰¹é‡ä¸‹è½½æ•´æ”¹æŠ¥å‘Šé™„ä»¶</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">onPatchExport</span>(<span class=\"params\">params</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">request</span>(<span class=\"title class_\">Api</span>.<span class=\"property\">onPatchExport</span> + <span class=\"string\">`?<span class=\"subst\">$&#123;stringify(params)&#125;</span>`</span>, &#123; </span><br><span class=\"line\">        <span class=\"attr\">method</span>: <span class=\"string\">&#x27;GET&#x27;</span> ,</span><br><span class=\"line\">        <span class=\"attr\">responseType</span>: <span class=\"string\">&#x27;blob&#x27;</span>, <span class=\"comment\">// ä¸‹è½½æ–‡ä»¶</span></span><br><span class=\"line\">        <span class=\"comment\">// body: &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">//     ...params</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>react-devtools</strong></p>\n<blockquote>\n<p>Ã— Install fail! Error: Unsupported URL Type: link:./scripts/eslint-rules</p>\n</blockquote>\n<p>å®‰è£…å‡ºé”™ï¼Œéœ€è¦æŠŠ3ä¸ªæ–‡ä»¶ä¸­çš„linkæ”¹æˆfile</p>\n<p><img src=\"https://gitee.com/feng-lekai/blog-image/raw/master/img/react_1.jpg\" alt=\"react_1\" loading=\"lazy\" class=\"Ï†bp\"></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">link<span class=\"punctuation\">:</span>./scripts/eslint-rules <span class=\"comment\">// æ”¹å‰</span></span><br><span class=\"line\">file<span class=\"punctuation\">:</span>./scripts/eslint-rules <span class=\"comment\">// æ”¹å</span></span><br></pre></td></tr></table></figure>\n<p>å®‰è£…æ•™ç¨‹</p>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/one_girl/article/details/80916232\" target=\"_blank\">https://blog.csdn.net/one_girl/article/details/80916232</a></p>\n</blockquote>\n<p><strong>TypeError: Cannot read property â€˜splitâ€™ of null</strong></p>\n<p>str.split(â€˜.â€™)</p>\n<p>å˜æˆ</p>\n<p>(str || â€œâ€).split(â€˜.â€™)</p>\n<p>ä¸æŠ¥é”™å•¦</p>\n<p><strong>routerReduxè·¯ç”±è·³è½¬</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi/router&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; routerRedux &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;dva/router&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">props</span>.<span class=\"title function_\">dispatch</span>(routerRedux.<span class=\"title function_\">push</span>(&#123; </span><br><span class=\"line\">      pathname : <span class=\"string\">&#x27;/partyBuildingDebriefing/debriefingMeeting/meetingStaffManagement&#x27;</span>, </span><br><span class=\"line\">      <span class=\"attr\">record</span>:&#123;</span><br><span class=\"line\">        <span class=\"attr\">detailVisibel</span>: <span class=\"literal\">true</span>, </span><br><span class=\"line\">        <span class=\"attr\">detailProps</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">title</span>: <span class=\"string\">&#x27;ç¼–è¾‘è¿°èŒä¼šè®®åŠäººå‘˜ä¿¡æ¯&#x27;</span>&#125;,</span><br><span class=\"line\">        <span class=\"attr\">id</span>: <span class=\"variable language_\">this</span>.<span class=\"property\">props</span>.<span class=\"property\">id</span></span><br><span class=\"line\">      &#125; </span><br><span class=\"line\">    &#125;))</span><br></pre></td></tr></table></figure>\n<p><strong>Antd Table åˆå¹¶æŸåˆ—å•å…ƒæ ¼æ–¹æ³•</strong></p>\n<p>é¡»ä¼ è¾“å‡ºå€¼textï¼Œå’Œç´¢å¼•å€¼index</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åˆå¹¶å•å…ƒæ ¼æ“ä½œ</span></span><br><span class=\"line\">threeCell = <span class=\"function\">(<span class=\"params\">text, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// åœ¨renderä¸­æ‰€æœ‰çš„åˆå¹¶éƒ½ä»…ä»…ç›¸å¯¹æ‰€æœ‰çš„nameè¿™ä¸€åˆ—æ¥è¯´ï¼Œindexä»0å¼€å§‹è®¡ç®—</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> obj = &#123;</span><br><span class=\"line\">      <span class=\"attr\">children</span>: index+<span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"attr\">props</span>: &#123;&#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// 3ä¸ªå•å…ƒæ ¼å–ä½™</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = index%<span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"comment\">// index=0ï¼šç›¸å¯¹nameè¿™ä¸€åˆ—ï¼Œåˆå¹¶3åˆ—å•å…ƒæ ¼</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      obj.<span class=\"property\">props</span>.<span class=\"property\">rowSpan</span> = <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// åˆå¹¶å•å…ƒæ ¼åï¼Œåˆ™ç¬¬1è¡Œæ¸²æŸ“ï¼Œç¬¬2ï¼Œ3è¡Œä¸æ¸²æŸ“</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span> &amp;&amp; i &lt;<span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">      obj.<span class=\"property\">props</span>.<span class=\"property\">rowSpan</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>Inputç»„ä»¶onChangeäº‹ä»¶è·å–valueå€¼</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onChange = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> value = e.<span class=\"property\">target</span>.<span class=\"property\">value</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(value);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>è¡¨å•è·å–ç”¨æˆ·è¾“å…¥åŸºæœ¬æ ¼å¼</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">FormItem</span> label=<span class=\"string\">&#x27;é¢å¥–æ—¥æœŸ&#x27;</span>&gt;</span><br><span class=\"line\"> &#123;form.<span class=\"title function_\">getFieldDecorator</span>(<span class=\"string\">&#x27;å­—æ®µå&#x27;</span>, &#123;</span><br><span class=\"line\">   <span class=\"attr\">initialValue</span>: <span class=\"string\">&#x27;é»˜è®¤å€¼&#x27;</span>,</span><br><span class=\"line\">   <span class=\"attr\">rules</span>: [&#123; <span class=\"attr\">message</span>: <span class=\"string\">&#x27;è§„åˆ™å­—æ®µ&#x27;</span>, &#125;]</span><br><span class=\"line\"> &#125;)(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Input</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&#x27;é¡µé¢æ¸²æŸ“è¾“å…¥æ¡†&#x27;</span>/&gt;</span></span>)&#125;</span><br><span class=\"line\">&lt;/<span class=\"title class_\">FormItem</span>&gt;</span><br></pre></td></tr></table></figure>\n<p><strong>é‡ç½®è¡¨å•éªŒè¯ä¿ç•™è¾“å…¥å€¼</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é‡ç½®è¡¨å•tenderStatuså±æ€§çš„å€¼ä»¥åŠè¡¨å•éªŒè¯æç¤ºï¼ˆå€¼ä¼šå˜æˆinitialValueçš„å€¼ï¼‰</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">props</span>.<span class=\"property\">form</span>.<span class=\"title function_\">resetFields</span>([<span class=\"string\">&#x27;tenderStatus&#x27;</span>]);</span><br><span class=\"line\"><span class=\"comment\">// å°†æˆ‘ä»¬é‡ç½®ä¹‹å‰å‚¨å­˜å¥½çš„å±æ€§å€¼ï¼Œç»™è”åŠ¨è¡¨å•çš„å±æ€§é‡æ–°èµ‹å€¼ï¼Œå¦åˆ™ä¼šå˜æˆinitialValueçš„å€¼</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">props</span>.<span class=\"property\">form</span>.<span class=\"title function_\">setFieldsValue</span>(&#123; <span class=\"attr\">tenderStatus</span>: status &#125;);</span><br></pre></td></tr></table></figure>\n<p><strong>Antdä¸­DatePickerç»„ä»¶åœ¨3.xåŠä»¥ä¸‹ç‰ˆæœ¬</strong></p>\n<p>åœ¨ä½¿ç”¨modeå±æ€§APIåé€‰æ‹©æ—¥æœŸæ²¡æœ‰ååº”ï¼Œéœ€è¦ä½¿ç”¨onPanelChangeå±æ€§å’ŒonOpenChangeå±æ€§æ”¹å˜openå±æ€§ã€‚</p>\n<p>disabledDateå±æ€§æ²¡æœ‰æ•ˆæœï¼Œæ— æ³•ç¦ç”¨ç›¸åº”å¹´ä»½ï¼Œæœˆä»½ï¼Œåªèƒ½ç¦ç”¨æ—¥æœŸã€‚å¯ä»¥åœ¨é€‰æ‹©å¹´ä»½æ—¶åˆ¤æ–­å½“å‰æ—¥æœŸä¸é¢„æœŸæ—¥æœŸç¬¦ä¸ç¬¦åˆç”¨messageåé¦ˆç»™ç”¨æˆ·ã€‚</p>\n<p><strong>Antd ç»™TableCell æ·»åŠ keyå±æ€§æ–¹æ³•</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è‡ªåŠ¨ç”Ÿæˆkey</span></span><br><span class=\"line\">generateRandomId = <span class=\"function\">(<span class=\"params\">length</span>) =&gt;</span> &#123;<span class=\"comment\">// lengthæ˜¯ä½ çš„idçš„é•¿åº¦ï¼Œå¯è‡ªå®šä¹‰</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>().<span class=\"title function_\">toString</span>(<span class=\"number\">36</span>).<span class=\"title function_\">substr</span>(<span class=\"number\">3</span>,length);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span>, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Example</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = <span class=\"title function_\">useState</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Similar to componentDidMount and componentDidUpdate:  </span></span><br><span class=\"line\">  <span class=\"title function_\">useEffect</span>(<span class=\"function\">() =&gt;</span> &#123;    <span class=\"comment\">// Update the document title using the browser API    document.title = `You clicked $&#123;count&#125; times`;  &#125;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You clicked &#123;count&#125; times<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        Click me</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>useState: å¯¹åº”classä¸­state,æ¯”å…¶æ›´åŠ å¼ºå¤§ï¼šå¯¹åº”å˜é‡è‡ªå¸¦æ–¹æ³•setStateè§£å†³å¤æ‚çš„é€»è¾‘é—®é¢˜ã€‚</p>\n<p>useEffect:å¯¹åº”classä¸­ComponentDidMountåˆå§‹åŒ–æ¸²æŸ“ï¼Œå±äºå‰¯ä½œç”¨æ“ä½œã€‚</p>\n","prev":{"title":"å¦‚ä½•å¿«é€Ÿæ­å»ºä¸€ä¸ªåšå®¢","link":"2021/11/14/å¦‚ä½•å¿«é€Ÿæ­å»ºä¸€ä¸ªåšå®¢"},"plink":"https://fenglekai.github.io/2021/11/14/Reactå­¦ä¹ ç¬”è®°/","reading_time":"1742 å­—çº¦ 12 åˆ†é’Ÿ"}