{"title":"React学习笔记","date":"2021-11-14T05:42:44.000Z","date_formatted":{"ll":"2021年11月14日","L":"2021/11/14","MM-DD":"11-14"},"thumbnail":"https://picsum.photos/1280/720?random=1","color":"#111","link":"2021/11/14/React学习笔记","tags":["📔笔记","🔥前端","🚀框架"],"updated":"2023-02-13T07:34:07.829Z","content":"<p><strong>用于构建用户界面的 JavaScript 库</strong></p>\n<p>state是当前组件的状态</p>\n<p>props是获取父组件的state值</p>\n<p>class类里，this指向当前类内的内容。例如this.state指向当前类的state状态；this.function指向当前类的方法。</p>\n<p><strong>AntDesignPro</strong></p>\n<p>使用Ant Design pro脚手架官网来搭建项目，其中最重要的三个文件夹，services、models、mock、pages</p>\n<ul>\n<li>\n<p>sevices：数据接口</p>\n</li>\n<li>\n<p>models：数据处理</p>\n</li>\n<li>\n<p>mock：模拟数据</p>\n</li>\n<li>\n<p>pages：页面</p>\n</li>\n</ul>\n<p>pages触发models中的方法来处理数据，若为异步操作在models中需要调用services中的数据接口方法，在后台未写完时可以通过mock中的模拟数据来调试</p>\n<p>具体来说，也即是使用dva时，**数据流向或者说触发流程为：**在pages中的jsx文件中通过dispatch触发models中的js文件中的effects或者reducers中的方法，其中effects中的方法是异步操作，通过yield call(调用接口函数方法名)调用从services中js文件引入的定义好的调用接口方法，然后通过yield put({type: ‘reduceres中的方法’})；来触发 reducers中的方法来修改state。</p>\n<p><strong>组件生命周期</strong></p>\n<p>componentWillMount 在渲染前调用,在客户端也在服务端。</p>\n<p>componentDidMount : 在第一次渲染后调用，只在客户端。之后组件已经生成了对应的DOM结构，可以通过this.getDOMNode()来进行访问。 如果你想和其他JavaScript框架一起使用，可以在这个方法中调用setTimeout, setInterval或者发送AJAX请求等操作(防止异步操作阻塞UI)。</p>\n<p>componentWillReceiveProps 在组件接收到一个新的 prop (更新后)时被调用。这个方法在初始化render时不会被调用。</p>\n<p>getDerivedStateFromProps componentWillReceiveProps的替换方案。React相当于把componentWillReceiveProps拆分成getDerivedStateFromProps和componentDidUpdate。</p>\n<p>shouldComponentUpdate 返回一个布尔值。在组件接收到新的props或者state时被调用。在初始化时或者使用forceUpdate时不被调用。</p>\n<p>可以在你确认不需要更新组件时使用。</p>\n<p>componentWillUpdate在组件接收到新的props或者state但还没有render时被调用。在初始化时不会被调用。</p>\n<p>componentDidUpdate 在组件完成更新后立即调用。在初始化时不会被调用。</p>\n<p>componentWillUnmount在组件从 DOM 中移除之前立刻被调用。</p>\n<p><strong>Hook</strong></p>\n<p>在这里，useState 就是一个 Hook （等下我们会讲到这是什么意思）。通过在函数组件里调用它来给组件添加一些内部 state。React 会在重复渲染时保留这个 state。useState 会返回一对值：当前状态和一个让你更新它的函数，你可以在事件处理函数中或其他一些地方调用这个函数。它类似 class 组件的 this.setState，但是它不会把新的 state 和旧的 state 进行合并。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">DetailQuery</span>(<span class=\"params\">props</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; clickDetailQueryBtn, clickDetailResetBtn &#125; = props;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [statu, setStatu] = <span class=\"title function_\">useState</span>(&#123; <span class=\"attr\">getstatu</span>: <span class=\"string\">&#x27;全部&#x27;</span> &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"title function_\">updateState</span> = partialState =&gt;</span><br><span class=\"line\">        <span class=\"title function_\">setStatu</span>(<span class=\"function\"><span class=\"params\">oldState</span> =&gt;</span> (&#123;</span><br><span class=\"line\">            ...oldState,</span><br><span class=\"line\">            ...partialState</span><br><span class=\"line\">        &#125;));</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Layout</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">            <span class=\"tag\">&lt;<span class=\"name\">Row</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;background:</span> &#x27;<span class=\"attr\">white</span>&#x27;, <span class=\"attr\">paddingTop:</span> <span class=\"attr\">20</span>, <span class=\"attr\">paddingRight:</span> <span class=\"attr\">20</span>, <span class=\"attr\">paddingBottom:</span> <span class=\"attr\">20</span>&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">            &gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\">                <span class=\"tag\">&lt;<span class=\"name\">Col</span> <span class=\"attr\">span</span>=<span class=\"string\">&#123;6&#125;</span> <span class=\"attr\">className</span>=<span class=\"string\">&#123;styles.formItemClass&#125;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                    状态：</span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;<span class=\"name\">Select</span> </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                    // <span class=\"attr\">defaultValue</span>=<span class=\"string\">&quot;全部&quot;</span> </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                    <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">width:</span> <span class=\"attr\">120</span> &#125;&#125; </span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                    <span class=\"attr\">value</span>=<span class=\"string\">&#123;statu.getstatu&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                    <span class=\"attr\">onChange</span>=<span class=\"string\">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        updateState(&#123; getstatu: e &#125;);&#125; &#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">                    &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;全部&quot;</span>&gt;</span>全部<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;待上报&quot;</span>&gt;</span>待上报<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;待审核&quot;</span>&gt;</span>待审核<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;已通过&quot;</span>&gt;</span>已通过<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                        <span class=\"tag\">&lt;<span class=\"name\">Select.Option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;未通过&quot;</span>&gt;</span>未通过<span class=\"tag\">&lt;/<span class=\"name\">Select.Option</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;/<span class=\"name\">Select</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                <span class=\"tag\">&lt;/<span class=\"name\">Col</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                <span class=\"tag\">&lt;<span class=\"name\">Col</span> <span class=\"attr\">push</span>=<span class=\"string\">&#123;1&#125;</span> <span class=\"attr\">span</span>=<span class=\"string\">&#123;6&#125;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;<span class=\"name\">Button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                        <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                        <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;marginRight:</span> <span class=\"attr\">7</span>&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                        <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">                            clickDetailQueryBtn(statu);</span></span><br><span class=\"line\"><span class=\"language-xml\">                        &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">                    &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        查询</span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;<span class=\"name\">Button</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">                        <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">                            clickDetailResetBtn(&#x27;&#x27;);</span></span><br><span class=\"line\"><span class=\"language-xml\">                        &#125;&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        // onClick=&#123;this.props.clickDetailResetBtn&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">                    &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">                        重置</span></span><br><span class=\"line\"><span class=\"language-xml\">                    <span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">                <span class=\"tag\">&lt;/<span class=\"name\">Col</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">            <span class=\"tag\">&lt;/<span class=\"name\">Row</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;/<span class=\"name\">Layout</span>&gt;</span></span></span><br><span class=\"line\">    );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>Router</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 审核和重新审核</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">toExamineReport</span>(<span class=\"params\">params</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">request</span>(<span class=\"title class_\">Api</span>.<span class=\"property\">toExamineReport</span>, &#123; </span><br><span class=\"line\">        <span class=\"attr\">method</span>: <span class=\"string\">&#x27;POST&#x27;</span> ,</span><br><span class=\"line\">        <span class=\"attr\">body</span>: &#123;</span><br><span class=\"line\">            ...params</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 查看上报记录</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">getMyCorrectionReportQueryRecord</span>(<span class=\"params\">params</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">request</span>(<span class=\"title class_\">Api</span>.<span class=\"property\">getMyCorrectionReportQueryRecord</span> + <span class=\"string\">`?<span class=\"subst\">$&#123;stringify(params)&#125;</span>`</span>, &#123; </span><br><span class=\"line\">        <span class=\"attr\">method</span>: <span class=\"string\">&#x27;GET&#x27;</span> ,</span><br><span class=\"line\">        <span class=\"comment\">// body: &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">//     ...params</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 批量下载整改报告附件</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">onPatchExport</span>(<span class=\"params\">params</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_\">request</span>(<span class=\"title class_\">Api</span>.<span class=\"property\">onPatchExport</span> + <span class=\"string\">`?<span class=\"subst\">$&#123;stringify(params)&#125;</span>`</span>, &#123; </span><br><span class=\"line\">        <span class=\"attr\">method</span>: <span class=\"string\">&#x27;GET&#x27;</span> ,</span><br><span class=\"line\">        <span class=\"attr\">responseType</span>: <span class=\"string\">&#x27;blob&#x27;</span>, <span class=\"comment\">// 下载文件</span></span><br><span class=\"line\">        <span class=\"comment\">// body: &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">//     ...params</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>react-devtools</strong></p>\n<blockquote>\n<p>× Install fail! Error: Unsupported URL Type: link:./scripts/eslint-rules</p>\n</blockquote>\n<p>安装出错，需要把3个文件中的link改成file</p>\n<p><img src=\"https://gitee.com/feng-lekai/blog-image/raw/master/img/react_1.jpg\" alt=\"react_1\" loading=\"lazy\" class=\"φbp\"></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">link<span class=\"punctuation\">:</span>./scripts/eslint-rules <span class=\"comment\">// 改前</span></span><br><span class=\"line\">file<span class=\"punctuation\">:</span>./scripts/eslint-rules <span class=\"comment\">// 改后</span></span><br></pre></td></tr></table></figure>\n<p>安装教程</p>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/one_girl/article/details/80916232\" target=\"_blank\">https://blog.csdn.net/one_girl/article/details/80916232</a></p>\n</blockquote>\n<p><strong>TypeError: Cannot read property ‘split’ of null</strong></p>\n<p>str.split(‘.’)</p>\n<p>变成</p>\n<p>(str || “”).split(‘.’)</p>\n<p>不报错啦</p>\n<p><strong>routerRedux路由跳转</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi/router&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; routerRedux &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;dva/router&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">props</span>.<span class=\"title function_\">dispatch</span>(routerRedux.<span class=\"title function_\">push</span>(&#123; </span><br><span class=\"line\">      pathname : <span class=\"string\">&#x27;/partyBuildingDebriefing/debriefingMeeting/meetingStaffManagement&#x27;</span>, </span><br><span class=\"line\">      <span class=\"attr\">record</span>:&#123;</span><br><span class=\"line\">        <span class=\"attr\">detailVisibel</span>: <span class=\"literal\">true</span>, </span><br><span class=\"line\">        <span class=\"attr\">detailProps</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">title</span>: <span class=\"string\">&#x27;编辑述职会议及人员信息&#x27;</span>&#125;,</span><br><span class=\"line\">        <span class=\"attr\">id</span>: <span class=\"variable language_\">this</span>.<span class=\"property\">props</span>.<span class=\"property\">id</span></span><br><span class=\"line\">      &#125; </span><br><span class=\"line\">    &#125;))</span><br></pre></td></tr></table></figure>\n<p><strong>Antd Table 合并某列单元格方法</strong></p>\n<p>须传输出值text，和索引值index</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 合并单元格操作</span></span><br><span class=\"line\">threeCell = <span class=\"function\">(<span class=\"params\">text, index</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 在render中所有的合并都仅仅相对所有的name这一列来说，index从0开始计算</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> obj = &#123;</span><br><span class=\"line\">      <span class=\"attr\">children</span>: index+<span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"attr\">props</span>: &#123;&#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// 3个单元格取余</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> i = index%<span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"comment\">// index=0：相对name这一列，合并3列单元格</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      obj.<span class=\"property\">props</span>.<span class=\"property\">rowSpan</span> = <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 合并单元格后，则第1行渲染，第2，3行不渲染</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (i &gt; <span class=\"number\">0</span> &amp;&amp; i &lt;<span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">      obj.<span class=\"property\">props</span>.<span class=\"property\">rowSpan</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>Input组件onChange事件获取value值</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onChange = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> value = e.<span class=\"property\">target</span>.<span class=\"property\">value</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(value);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>表单获取用户输入基本格式</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">FormItem</span> label=<span class=\"string\">&#x27;颁奖日期&#x27;</span>&gt;</span><br><span class=\"line\"> &#123;form.<span class=\"title function_\">getFieldDecorator</span>(<span class=\"string\">&#x27;字段名&#x27;</span>, &#123;</span><br><span class=\"line\">   <span class=\"attr\">initialValue</span>: <span class=\"string\">&#x27;默认值&#x27;</span>,</span><br><span class=\"line\">   <span class=\"attr\">rules</span>: [&#123; <span class=\"attr\">message</span>: <span class=\"string\">&#x27;规则字段&#x27;</span>, &#125;]</span><br><span class=\"line\"> &#125;)(<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Input</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&#x27;页面渲染输入框&#x27;</span>/&gt;</span></span>)&#125;</span><br><span class=\"line\">&lt;/<span class=\"title class_\">FormItem</span>&gt;</span><br></pre></td></tr></table></figure>\n<p><strong>重置表单验证保留输入值</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 重置表单tenderStatus属性的值以及表单验证提示（值会变成initialValue的值）</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">props</span>.<span class=\"property\">form</span>.<span class=\"title function_\">resetFields</span>([<span class=\"string\">&#x27;tenderStatus&#x27;</span>]);</span><br><span class=\"line\"><span class=\"comment\">// 将我们重置之前储存好的属性值，给联动表单的属性重新赋值，否则会变成initialValue的值</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">props</span>.<span class=\"property\">form</span>.<span class=\"title function_\">setFieldsValue</span>(&#123; <span class=\"attr\">tenderStatus</span>: status &#125;);</span><br></pre></td></tr></table></figure>\n<p><strong>Antd中DatePicker组件在3.x及以下版本</strong></p>\n<p>在使用mode属性API后选择日期没有反应，需要使用onPanelChange属性和onOpenChange属性改变open属性。</p>\n<p>disabledDate属性没有效果，无法禁用相应年份，月份，只能禁用日期。可以在选择年份时判断当前日期与预期日期符不符合用message反馈给用户。</p>\n<p><strong>Antd 给TableCell 添加key属性方法</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 自动生成key</span></span><br><span class=\"line\">generateRandomId = <span class=\"function\">(<span class=\"params\">length</span>) =&gt;</span> &#123;<span class=\"comment\">// length是你的id的长度，可自定义</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title class_\">Math</span>.<span class=\"title function_\">random</span>().<span class=\"title function_\">toString</span>(<span class=\"number\">36</span>).<span class=\"title function_\">substr</span>(<span class=\"number\">3</span>,length);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>Hook 是 React 16.8 的新增特性。它可以让你在不编写 class 的情况下使用 state 以及其他的 React 特性</strong></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span>, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Example</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = <span class=\"title function_\">useState</span>(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Similar to componentDidMount and componentDidUpdate:  </span></span><br><span class=\"line\">  <span class=\"title function_\">useEffect</span>(<span class=\"function\">() =&gt;</span> &#123;    <span class=\"comment\">// Update the document title using the browser API    document.title = `You clicked $&#123;count&#125; times`;  &#125;);</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You clicked &#123;count&#125; times<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        Click me</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>useState: 对应class中state,比其更加强大：对应变量自带方法setState解决复杂的逻辑问题。</p>\n<p>useEffect:对应class中ComponentDidMount初始化渲染，属于副作用操作。</p>\n","prev":{"title":"如何快速搭建一个博客","link":"2021/11/14/如何快速搭建一个博客"},"plink":"https://fenglekai.github.io/2021/11/14/React学习笔记/","reading_time":"1742 字约 12 分钟"}